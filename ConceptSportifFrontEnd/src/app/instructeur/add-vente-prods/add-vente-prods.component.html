
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
        <div class="layout-container">
          <!-- Menu -->
  <app-sidebar></app-sidebar>
         
          <!-- / Menu -->
  
          <!-- Layout container -->
          <div class="layout-page">
            <!-- Navbar -->
  <app-navbar></app-navbar>   
  
            <!-- / Navbar -->
  
            <!-- Content wrapper -->
            <div class="content-wrapper">
              <!-- Content -->
  
         
              <!-- / Content -->
     <!-- Content -->
     <div class="container-xxl flex-grow-1 container-p-y">

        <div class="row">
                                                            <!-- User Sidebar -->
            <div
                class="col-xl-12 col-lg-5 col-md-5 order-1 order-md-0"
            >
                <!-- User Card -->

                <div class="card mb-12">
                    <div class="card-body">

                        <div class="info-container">
                            <form #f="ngForm" id="add_vente_form" (ngSubmit)="ajouternouvelleBon(f)" class="row g-3">
                                <h5 class="pb-2 border-bottom mb-4">
                                    Ajouter une vente
                                </h5>
                                <div class="col-md-6">
                                    <label
                                        class="form-label"
                                        for="date"
                                    >Date</label
                                    >
                                    <input
                                    type="date"
                                    id="datebe"
                                    name="datebe"
                                    class="form-control"
                                    [(ngModel)]="datebe"
                                    />
                                </div>
                          
                                <div class="col-md-6">
                                    <label
                                        class="form-label"
                                        for="date"
                                    >Catégorie</label
                                    >
                                    <select id="categorie_Produit_id" name="categorie_Produit_id" class="select2 form-select" required [(ngModel)]="nouvelleBon.categorie_Produit_id" #categorie_ProduitId="ngModel" (change)="getall_Produit_by_categorie(nouvelleBon.categorie_Produit_id)">
                                        <option value="null" disabled selected>Sélectionnez un categorie_Produit</option>
                                        <option *ngFor="let categorie_Produit of Categorie_Produits" [value]="categorie_Produit.id">{{ categorie_Produit.libcateg }} </option>
                                      </select>
                                      <div *ngIf="categorie_ProduitId.invalid && (categorie_ProduitId.dirty || categorie_ProduitId.touched)" class="text-danger">
                                        Le categorie_Produit est requis.
                                      </div>
                                </div>
                                <div class="col-12 col-md-4">
                                    <label
                                        class="form-label"
                                        for="date"
                                    >Produits</label
                                    >
                                    <select id="IDPROD" name="IDPROD" class="select2 form-select" [(ngModel)]="selectedProductId" (change)="remplir_partie_detail()">
                                        <option value="null" disabled selected>Sélectionnez un produit</option>
                                        <option *ngFor="let produit of produits" [value]="produit.id">{{ produit.desprod }}</option>
                                    </select>
                                </div>
                                <div class="col-12 col-md-8">

                                    <div class="card-datatable table-responsive">
                                        <table
                                            class="datatables-users table border-top"
                                            style="white-space: nowrap;"
                                        >
                                            <tr>

                                                <td style="text-align:center;width:150px">
                                                    Code
                                                    <br>
                                                    <input type="text" id="code_prod_input" name="code_prod_input" [(ngModel)]="code_prod_input" class="form-control"  readonly/>
                                                </td>
                                                <td style="text-align:center;">
                                                    Description
                                                    <br>
                                                    <input type="text" id="desc_prod_input" name="desc_prod_input" [(ngModel)]="desc_prod_input" class="form-control" readonly/>
                                                </td>
                                                <td style="text-align:center;width:150px">
                                                    Quantité
                                                    <br>
                                                    <input type="number" id="qte_prod_input" name="qte_prod_input"[(ngModel)]="qte_prod_input" class="form-control" />
                                                </td>
                                                <td style="text-align:center;width:150px">
                                                    Prix unitaire TTC
                                                    <br>
                                                    <input type="text" id="pu_prod_input" name="pu_prod_input" class="form-control" [(ngModel)]="prixventeht" value="0"/>
                                                    <input type="hidden" id="id_prod_input" name="id_prod_input" class="form-control"/>
                                                    <input type="hidden" id="prix_vente_ht_input" name="prix_vente_ht_input" class="form-control"/>
                                                    <input type="hidden" id="taux_tva_input" name="taux_tva_input" class="form-control"/>
                                                </td>

                                                <td style="text-align:center;padding-top:30px;">
                                                    <button type="button" class="btn btn-success" (click)="add_ligne_table_prod()">+</button>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>



                                <div style="text-align: right">
                                    <button type="button" class="btn btn-danger" style="width: 25%;" (click)="removeRow()">Supprimer</button>
                                </div>
                                <div class="card-datatable table-responsive">
                                    <table
                                        class="datatables-users table border-top"
                                        id="table_prod"
                                        style="white-space: nowrap;"
                                    >
                                        <thead>
                                        <tr>
                                            <th style="text-align:center"></th>
                                            <th style="text-align:center">Code</th>
                                            <th style="text-align:center">Description</th>
                                            <th style="text-align:center;width: 150px;">Quantité</th>
                                            <th style="text-align:center;width: 150px;">Prix unitaire HT</th>
                                            <th style="text-align:center;width: 150px;">Remise</th>
                                            <th style="text-align:center;width: 150px;">Prix unitaire net HT</th>
                                            <th style="text-align:center;width: 150px;">Total net HT</th>
                                            <th style="text-align:center;width: 150px;">Taux TVA</th>
                                            <th style="text-align:center;width: 150px;">Total TTC</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of tab; let i = index;">
                                                <td style="text-align:center">
                                                    <input type="checkbox" [(ngModel)]="item.checked" name="itemChecked" />
                                                </td>
                                                <td style="text-align:center">
                                                    <input type="text" [(ngModel)]="item.code" name="codeInput{{item.id}}" class="form-control" readonly/>
                                                </td>
                                                <td style="text-align:center">
                                                    {{item.desc}}
                                                </td>
                                                <td style="text-align:center">
                                                    <input type="number" [(ngModel)]="item.qte" name="qteInput{{item.id}}" class="form-control" readonly/>
                                                </td>
                                                <td style="text-align:center">
                                                    <input type="number" [(ngModel)]="item.prix" name="prixInput{{item.id}}" class="form-control" readonly/>
                                                </td>
                                                <td style="text-align:center">
                                                    <input type="number" [(ngModel)]="item.remise" name="remiseInput{{item.id}}" class="form-control" />
                                                </td>
                                                <td style="text-align:center">
                                                    <input type="number" [(ngModel)]="item.prix" name="prixInput{{item.id}}" class="form-control" readonly/>
                                                </td>
                                                <td style="text-align:center">
                                                    <input type="text" [(ngModel)]="item.prixnet" name="totalNetInput{{item.id}}" class="form-control" readonly/>
                                                </td>
                                                <td style="text-align:center">
                                                    <input type="text" [(ngModel)]="item.tva" name="tauxTVAInput{{item.id}}" class="form-control" readonly/>
                                                </td>
                                                <td style="text-align:center">
                                                    <input type="text" [(ngModel)]="item.prixttc" name="totalTTCInput{{item.id}}" class="form-control" readonly/>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-12 col-md-3">
                                    <label
                                        class="form-label"
                                        for="total_net_ht"
                                    >Total net HT</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="total_net_ht_final"
                                        value="0"
                                        name="total_net_ht_final"
                                        aria-label="Total net HT"
                                        [(ngModel)]="tot"
                                        readonly
                                    />
                                </div>
                                <div class="col-12 col-md-3">
                                    <label
                                        class="form-label"
                                        for="tot_ttc"
                                    >Total TTC</label
                                    >
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="tot_ttc_final"
                                        value="0"
                                        name="tot_ttc_final"
                                        aria-label="Total TTC"
                                        [(ngModel)]="totttc"

                                        readonly
                                    />
                                </div>
                                <input
                                    type="hidden"
                                    id="qte_list"
                                    name="qte_list"
                                    class="form-control"
                                />
                                <input
                                    type="hidden"
                                    id="pu_vente_list"
                                    name="pu_vente_list"
                                    class="form-control"
                                />
                                <input
                                    type="hidden"
                                    id="pu_net_ht_vente_list"
                                    name="pu_net_ht_vente_list"
                                    class="form-control"
                                />
                                <input
                                    type="hidden"
                                    id="remise_list"
                                    name="remise_list"
                                    class="form-control"
                                />
                                <input
                                    type="hidden"
                                    id="prod_id_list"
                                    name="prod_id_list"
                                    class="form-control"
                                />
                                <div class="d-flex justify-content-center pt-3">

                                    <button type="submit" class="btn btn-primary" id="submitButton" >Valider</button>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
                <!-- /User Card -->


            </div>
            <!--/ User Sidebar -->

        </div>

    </div>








    <!-- / Content -->
              <!-- Footer -->
            <app-footer></app-footer>
              <!-- / Footer -->
  
              <div class="content-backdrop fade"></div>
            </div>
            <!-- Content wrapper -->
          </div>
          <!-- / Layout page -->
        </div>
  
        <!-- Overlay -->
        <div class="layout-overlay layout-menu-toggle"></div>
      </div>
      <!-- / Layout wrapper -->
  
      
  
   
    